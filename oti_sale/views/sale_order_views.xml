<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <record id="sale_order_view_form_inherit" model="ir.ui.view">
	<field name="name">sale.order.view.form.inherit</field>
	<field name="model">sale.order</field>
	<field name="inherit_id" ref="sale.view_order_form"/>
	<field name="arch" type="xml">
	  <field name="partner_id" position="after">
		<field name="project_subject" attrs="{'readonly': [('state', 'not in', ['draft', 'sent'])]}"/>
	  </field>
	  <field name="product_template_id" position="before">
		<field name="item"/>
	  </field>
	  <xpath expr="//notebook[1]" position="inside">
		<page string="Attachment" name="attachment" attrs="{'invisible': ['|', ('id', '=', False), ('state', 'not in', ['sale'] )]}">
		  <group>
			<field name="sale_attachment_date" options="{'datepicker': {'format': 'MM/yyyy'}}"/>
			<field name="attachment_parent_id" invisible="1"/>
			<field name="attachment_state" invisible="1"/>
		  </group>
		  <group>
			<field name="sale_attachment_widget" colspan="2" nolabel="1" widget="sale_attachment" options="{'date_ref': 'sale_attachment_date'}"/>
		  </group>
		  <group>
			<group><field name="attachment_note" /></group>
			<group>
			  <button name="action_attachment_report" string="Imprimer" type="object" class="oe_highlight"></button>
			  <button name="confirm_attachment" string="Valider" type="object" attrs="{'invisible':[('attachment_parent_id', '!=', False), ('attachment_state', '!=', 'draft')]}"></button>
			  <div attrs="{'invisible':[('attachment_state', '!=', 'validated')]}">
				<span>Attachement Valid√©</span>
			  </div>
			</group>

		  </group>
		</page>
	  </xpath>
	</field>
  </record>
</odoo>